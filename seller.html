<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Seller Dashboard - Gamer's Auction</title>

  <!-- Google Sign-In -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <style>
    body { margin:0; font-family: Arial, sans-serif; background:#f7f7f7; color:#111; }
    header { background: #131921; padding:0.75rem 2rem; display:flex; justify-content:space-between; align-items:center; position:sticky; top:0; z-index:1000; }
    header img { height: 65px; }
    nav a { color:#fff; text-decoration:none; margin-left:1.5rem; font-weight:bold; transition:0.3s; }
    nav a:hover { color:#ff9900; }
    .g_id_signin { margin-left:1rem; }

    .container { max-width:1000px; margin:2rem auto; background:#fff; padding:2rem; border-radius:10px; box-shadow:0 5px 15px rgba(0,0,0,0.1); }
    h2 { text-align:center; color:#ff9900; margin-bottom:1.5rem; }
    .message { text-align:center; font-size:1.2rem; color:#b12704; margin-bottom:1rem; }

    form label { display:block; margin-top:1rem; font-weight:bold; }
    form input { width:100%; padding:0.75rem; margin-top:0.5rem; border:1px solid #ccc; border-radius:5px; font-size:1rem; }
    form button { margin-top:1.5rem; background:#ff9900; color:white; border:none; padding:0.75rem 1.5rem; border-radius:5px; cursor:pointer; font-size:1rem; transition:transform 0.3s, background 0.3s; }
    form button:hover { transform:scale(1.05); background:#e68a00; }

    .product-list { margin-top:2rem; display:grid; grid-template-columns:repeat(auto-fill, minmax(220px, 1fr)); gap:1rem; }
    .product-card { background:#f1f1f1; padding:1rem; border-radius:8px; display:flex; flex-direction:column; align-items:center; box-shadow:0 2px 6px rgba(0,0,0,0.05); }
    .product-card img { width:100%; height:150px; object-fit:cover; border-radius:5px; margin-bottom:0.5rem; }
    .product-card h4 { margin:0.5rem 0; color:#131921; }
    .product-card p { margin:0; font-weight:bold; color:#b12704; }
    .product-card .seller { font-size:0.85rem; color:#555; margin-top:0.25rem; }
  </style>
</head>
<body>

<header>
  <img src="image_2025-09-09_095842205.png" alt="Gamer's Auction Logo">
  <nav>
    <a href="index.html">Home</a>
    <a href="shop.html">Shop</a>
    <a href="cart.html">Cart</a>
    <a href="checkout.html">Checkout</a>
  </nav>
  <div class="g_id_signin" id="googleSignIn"></div>
</header>

<div class="container">
  <h2>Seller Dashboard</h2>
  <div id="signinMessage" class="message">Please sign in with Google to upload products.</div>

  <form id="productForm" style="display:none;">
    <label for="displayName">Display Name (visible to buyers)</label>
    <input type="text" id="displayName" required placeholder="Enter your display name">

    <label for="name">Product Name</label>
    <input type="text" id="name" required placeholder="Enter product name">

    <label for="price">Price (₹)</label>
    <input type="number" id="price" required placeholder="Enter price">

    <label for="image">Product Image</label>
    <input type="file" id="image" accept="image/*" required>

    <button type="submit">Add Product</button>
  </form>

  <div class="product-list" id="productList"></div>
</div>

<footer style="text-align:center; padding:2rem; background:#131921; color:#fff; margin-top:2rem;">
  <img src="image_2025-09-09_095842205.png" alt="Gamer's Auction Logo" style="height:40px; display:block; margin:0 auto 0.5rem;">
  <p>&copy; 2025 Gamer's Auction. All Rights Reserved.</p>
  <p>
    Visit <a href="https://gamerstech.vercel.app" target="_blank" style="color:#ff9900;">Gamerstech</a> |
    Watch on <a href="https://www.youtube.com/@ItzDareYT" target="_blank" style="color:#ff9900;">YouTube</a>
  </p>
</footer>

<script>
  let currentUser = null;

  function handleCredentialResponse(response) {
    console.log("JWT ID token: " + response.credential);
    // Decode the token if you want user info, here we just show the form
    currentUser = true; // user signed in
    document.getElementById("signinMessage").style.display = "none";
    document.getElementById("productForm").style.display = "block";
  }

  window.onload = function () {
    google.accounts.id.initialize({
      client_id: "189925870813-9ipif2qvi3vkv4f7lsh4p0e4kg644t64.apps.googleusercontent.com",
      callback: handleCredentialResponse
    });
    google.accounts.id.renderButton(
      document.getElementById("googleSignIn"),
      { theme: "outline", size: "large" }
    );

    loadProducts();
  };

  const form = document.getElementById("productForm");
  const productList = document.getElementById("productList");

  form.addEventListener("submit", function(e) {
    e.preventDefault();
    if (!currentUser) return alert("Please sign in first.");

    const displayName = document.getElementById("displayName").value;
    const name = document.getElementById("name").value;
    const price = document.getElementById("price").value;
    const file = document.getElementById("image").files[0];

    if (!file) return alert("Please select an image.");

    const reader = new FileReader();
    reader.onload = function() {
      const imageData = reader.result;

      const products = JSON.parse(localStorage.getItem("products") || "[]");
      products.push({ name, price, image: imageData, seller: displayName });
      localStorage.setItem("products", JSON.stringify(products));

      form.reset();
      loadProducts();
      alert("Product added successfully!");
    };
    reader.readAsDataURL(file);
  });

  function loadProducts() {
    const products = JSON.parse(localStorage.getItem("products") || "[]");
    productList.innerHTML = "";
    if (products.length === 0) {
      productList.innerHTML = "<p>No products added yet.</p>";
      return;
    }
    products.forEach(product => {
      const div = document.createElement("div");
      div.className = "product-card";
      div.innerHTML = `
        <img src="${product.image}" alt="${product.name}">
        <h4>${product.name}</h4>
        <p>₹${product.price}</p>
        <div class="seller">Seller: ${product.seller}</div>
      `;
      productList.appendChild(div);
    });
  }
</script>

</body>
</html>
